<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <style>
       @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .side-menu {
        position: fixed;
        top: 0;
        left: 0;
        height: 100%;
        width: 0;
        background: #fff;
        opacity: 0;
        transition: width 0.3s ease, opacity 0.3s ease;
        overflow: hidden;
        z-index: 1000;
        box-shadow: 2px 0 5px rgba(0,0,0,0.2);
    }

    /* ... other existing styles ... */

    /* New styles to move footer to bottom */
    body {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        margin: 0;
    }

    .content {
        flex-grow: 1;
    }

        .side-menu.open {
            width: 250px;
            opacity: 1;
        }

        .side-menu a {
            display: block;
            padding: 1rem;
            color: #333;
            text-decoration: none;
        }

        .side-menu a:hover {
            color: #007bff;
            text-decoration: underline;
        }

        /* Logo fade-in */
        .logo img {
            opacity: 0;
            animation: fadeIn 0.5s ease-in forwards;
        }

        /* Navigation links staggered fade-in */
        .nav-links li {
            opacity: 0;
            animation: fadeIn 0.3s ease-in forwards;
        }

        .nav-links li:nth-child(1) { animation-delay: 0.1s; }
        .nav-links li:nth-child(2) { animation-delay: 0.2s; }
        .nav-links li:nth-child(3) { animation-delay: 0.3s; }
        .nav-links li:nth-child(4) { animation-delay: 0.4s; }
        .nav-links li:nth-child(5) { animation-delay: 0.5s; }
        .nav-links li:nth-child(6) { animation-delay: 0.6s; }

        .nav-links a:hover {
            color: #007bff;
            text-decoration: underline;
        }

       .btn {
  background-color: #FFC107; /* Yellowish background */
  color: #000000; /* Black text */
  padding: 12px 24px; /* Same size as login */
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 1.1em; /* Matching font size */
  transition: background-color 0.3s ease, transform 0.2s ease;
}

.btn:hover {
  background-color: #FFA000; /* Darker yellow when hovering */
  color: #000000; /* Keep the text black */
  transform: scale(1.05); /* Slight zoom effect */
}

.btn:disabled {
  background-color: #ccc; /* Gray when disabled */
  color: #000000; /* Black text */
  cursor: not-allowed;
}

        .hamburger:hover {
            color: #007bff;
            transform: rotate(90deg);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-container {
                flex-wrap: wrap;
                padding: 1rem;
            }

            .nav-links {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <!-- Side Sliding Drawer -->
    <div id="side-menu" class="side-menu" role="navigation" aria-label="Side menu">
        <a href="javascript:void(0)" class="closebtn" id="closebtn" aria-label="Close menu">×</a>
        <a href="#">Go to Voting</a>
    </div>

    <!-- Header -->
    <header>
        <div class="header-container">
            <!-- Left Section: Hamburger & Logo -->
            <div class="header-left">
                <button id="menu-toggle" class="hamburger">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="logo">
                    <a href="{{ url_for('index') }}">
                        <img src="{{ url_for('static', filename='image.png') }}" alt="OwlJudge Logo" class="logo-img">
                    </a>
                </div>
            </div>
            <!-- Middle Section: Navigation -->
            <div class="header-middle">
                <nav aria-label="Main navigation">
                    <ul class="nav-links">
                        <li><a href="{{ url_for('index') }}">Home</a></li>
                        <li><a href="{{ url_for('audience') }}">Audience</a></li>
                        <li><a href="{{ url_for('about') }}">About Us</a></li>
                        <li><a href="{{ url_for('contact') }}">Contact Us</a></li>
{% if current_user and (current_user.role == 'judge' or current_user.role == 'admin') %}
                        <li><a href="{{ url_for('vote_casting') }}">Voting</a></li>
                        {% endif %}
                        {% if current_user and current_user.role == 'admin' %}
                            <li><a href="{{ url_for('dashboard') }}">Admin Dashboard</a></li>
                        {% endif %}
                    </ul>
                </nav>
            </div>
            <!-- Right Section: Login/Signup or Logout -->
            <div class="header-right">
                {% if current_user %}
                    <a href="{{ url_for('logout') }}" class="btn">Logout</a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="btn">Login</a> |
                    <a href="{{ url_for('signup') }}" class="btn">Sign Up</a>
                {% endif %}
            </div>
        </div>
    </header>

    <!-- Flash Messages -->
    <div class="flash-messages">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>

    <!-- Content Block -->
    <div class="content">
        {% block content %}{% endblock %}
    </div>

    <!-- Footer -->
    <footer>
        <p>© 2025 OwlJudge. All rights reserved.</p>
    </footer>

    <!-- JavaScript for Side Menu -->
    <script>
        const menuToggle = document.getElementById("menu-toggle");
        const sideMenu = document.getElementById("side-menu");
        const closeBtn = document.getElementById("closebtn");

        menuToggle.addEventListener("click", () => sideMenu.classList.add("open"));
        closeBtn.addEventListener("click", () => sideMenu.classList.remove("open"));

        // Close side menu when clicking outside
        document.addEventListener("click", (e) => {
            if (!sideMenu.contains(e.target) && !menuToggle.contains(e.target)) {
                sideMenu.classList.remove("open");
            }
        });

        // Highlight active link in side menu
        document.addEventListener("DOMContentLoaded", function() {
            const currentPath = window.location.pathname;
            document.querySelectorAll("#side-menu a").forEach(link => {
                if (link.getAttribute("href") === currentPath) {
                    link.classList.add("active");
                }
            });
        });
    </script>

    <script src="{{ url_for('static', filename='final_auth_overrides.js') }}"></script>
</body>
</html>